<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Football World Cup Dashboard</title>
    <style>
        /* Stilizarea paginii */
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f4f4f4;
            color: #333;
        }

        h1 {
            text-align: center;
            padding: 20px;
            background-color: #4CAF50;
            color: white;
        }

        p {
            text-align: center;
            font-size: 16px;
            margin-bottom: 20px;
        }

        h2 {
            text-align: center;
            margin-bottom: 20px;
        }

        label {
            font-size: 18px;
            margin-right: 10px;
        }

        select {
            padding: 5px;
            font-size: 16px;
        }

        table {
            width: 80%;
            margin: 20px auto;
            border-collapse: collapse;
            background-color: white;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }

        th, td {
            padding: 20px;
            text-align: center;
            border-bottom: 1px solid #ddd;
        }

        th {
            background-color: #4CAF50;
            color: white;
        }

        tr:hover {
            background-color: #f1f1f1;
        }

        .empty-message {
            text-align: center;
            padding: 20px;
        }
    </style>

    <script>
        // Function to fetch data from the server
        function fetchData() {
            const selectedTable = document.getElementById("tableDropdown").value; // Selected table
            const endpoint = `/admin/api/${selectedTable}`; // Corresponding endpoint

            // Fetch request to the endpoint
            fetch(endpoint)
                .then(response => {
                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }
                    return response.json();
                })
                .then(data => {
                    displayTable(data); // Display the fetched data in the table
                })
                .catch(error => {
                    console.error('Error fetching data:', error);
                    alert("A apărut o eroare la preluarea datelor! Verificați conexiunea sau serverul.");
                });
        }

        // Function to populate the table with data
        function displayTable(data) {
            const table = document.getElementById("dataTable");
            table.innerHTML = ''; // Clear previous table data

            if (!data || data.length === 0) {
                table.innerHTML = '<tr><td colspan="5" class="empty-message">No data available</td></tr>';
                return;
            }

            // Create table header dynamically based on the keys of the first data object
            const headers = Object.keys(data[0]);
            const headerRow = document.createElement("tr");

            headers.forEach(header => {
                const th = document.createElement("th");

                // Check if the column is "pozitie_finala" and the table is "clasamente"
                if (header === "pozitie_finala" && document.getElementById("tableDropdown").value === "clasamente") {
                    th.innerText = "pozitie finala in clasament";
                } else {
                    th.innerText = header.replace('_', ' '); // Improve readability by replacing underscores with spaces
                }

                headerRow.appendChild(th);
            });
            table.appendChild(headerRow);

            // Add table rows
            data.forEach(item => {
                const row = document.createElement("tr");
                headers.forEach(header => {
                    const td = document.createElement("td");
                    td.innerText = item[header] !== null ? item[header] : 'N/A'; // Handle null values
                    row.appendChild(td);
                });
                table.appendChild(row);
            });
        }
    </script>
</head>
<body>
<h1>Bine ati venit pe pagina campionatului mondial de fotbal</h1>
<h2>Explorati lumea fotbalului selectand mai jos informatia dorita</h2>

<div style="text-align: center;">
    <label for="tableDropdown">Selectati ce doriti sa vizualizati azi:</label>
    <select id="tableDropdown" onchange="fetchData()"> <!-- Dropdown for table selection -->
        <option value="clasamente">Clasamente</option>
        <option value="echipe">Echipe</option>
        <option value="jucatori">Jucători</option>
        <option value="meciuri">Meciuri</option>
        <option value="sponsori">Sponsori</option>
        <option value="sponsori_echipe">Sponsori Echipe</option>
        <option value="stadioane">Stadioane</option>
        <option value="statistici_echipe">Statistici Echipe</option>
        <option value="statistici_jucatori">Statistici Jucători</option>
    </select>
</div>

<table id="dataTable">
    <!-- The table will be dynamically populated with data -->
</table>
</body>
</html>
